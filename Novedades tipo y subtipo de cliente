void schedule.Novedades_tipocliente()
{
username = "todocostura";
password = "TC0stur4!";
credentials = username + ":" + password;
encoded_credentials = zoho.encryption.base64Encode(credentials);
headers = Map();
headers.put("Authorization","Basic " + encoded_credentials);
headers.put("Content-Type","application/json");
idZoho = "N";
api_url = "http://190.110.230.161:8282/subtypes";
response = invokeurl
[
	url :api_url
	type :GET
	headers:headers
];
if(response != null && response.size() > 0)
{
	for each  record in response
	{
		data = Map();
		codSub = record.get("codSubtipCliente");
		codTip = record.get("codTipCliente");
		data.put("Cod_Subtipo",codSub);
		data.put("Cod_Tipo_Cliente",codTip);
		nombresub = record.get("descSubtipoCliente");
		namesubtipo = codTip + " - " + nombresub;
		data.put("Name",namesubtipo);
		//buscar subtipo y tipo de cliente en zoho
		searchResponse = zoho.crm.searchRecords("Subtipos_de_Cliente","(Cod_Subtipo:equals:" + codSub + ")");
		searchResponse1 = zoho.crm.searchRecords("Tipos_de_Cliente","(Cod_Tipo_Cliente:equals:" + codTip + ")");
		//crear o actualizar subtipo de cliente
		if(searchResponse.size() > 0)
		{
			subtipId = searchResponse.get(0).get("id");
			updateResponse = zoho.crm.updateRecord("Subtipos_de_Cliente",subtipId,data);
			info "Condicion " + codSub + " actualizado: " + updateResponse;
		}
		else
		{
			createResponse = zoho.crm.createRecord("Subtipos_de_Cliente",data);
			info "Condicion " + codSub + " creado: " + createResponse;
		}
		// crear o actualizar tipo de cliente
		if(searchResponse1.size() > 0)
		{
			tipId = searchResponse.get(0).get("id");
			updateResponse2 = zoho.crm.updateRecord("Tipos_de_Cliente",tipId,data);
			info "Condicion " + codSub + " actualizado: " + updateResponse;
		}
		else
		{
			createResponse2 = zoho.crm.createRecord("Tipos_de_Cliente",data);
			info "Condicion " + tipId + " creado: " + createResponse;
		}
	}
}
}
